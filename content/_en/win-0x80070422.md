---
title: "Windows Update サービスが無効です 0x80070422"
errorText: "Windows Update サービスが無効です 0x80070422"
tags: ["Windows", "Update", "Service"]
updatedAt: "2025-11-03T09:11:56.107Z"
lang: "en"
---

## Summary
- Occurrence (1 line)  
  Appears when attempting Windows Update and the Windows Update service is stopped or disabled, showing "Windows Update service is disabled 0x80070422."  
- Impact (1 line)  
  Prevents checking, downloading, and applying Windows Updates; security patches are not installed.  
- Urgency (High/Medium/Low, 1-line reason)  
  High (failure to apply security updates creates immediate risk).

## Common causes (priority order)
1. Windows Update service (wuauserv) is disabled or stopped.  
2. Dependency services (Background Intelligent Transfer Service, CryptSvc) are stopped or corrupted.  
3. Service-related registry entries or ACLs were altered, blocking startup.  
4. Files or handles are locked so the service cannot access required files (file lock).  
5. Blocking by AppLocker / Software Restriction Policies (SRP) / SmartScreen or similar execution-control tools.

## 60-second checks (quickest steps)
- Start an elevated Command Prompt / PowerShell and retry the update.  
- Check current ACL:
```cmd
icacls "C:\Windows\System32\wuauserv"
```
- Check your privileges:
```cmd
whoami /groups & whoami /priv
```
- Check Defender blocks/history and CFA state:
```powershell
Get-MpThreatDetection -ErrorAction SilentlyContinue | Select Timestamp, Action, Resources | Select -First 5
Get-MpPreference | Select EnableControlledFolderAccess
```
- Verify TEMP folder permissions:
```cmd
echo %TEMP%
icacls "%TEMP%"
```
- Snapshot GPO influence:
```cmd
gpresult /h "%USERPROFILE%\Desktop\gp.html"
```

## 5-minute resolution (operational flow)
1) Identify target → check service status and start wuauserv and dependency services:
```cmd
sc query wuauserv
sc start wuauserv
sc start bits
sc start cryptsvc
```
2) If ownership/permissions are wrong, grant them (GUI or commands below).  
3) If Controlled Folder Access or EDR is blocking, add allow entries and remove MOTW (Zone.Identifier).  
   - PowerShell (unblock file):
```powershell
Unblock-File -Path "C:\Path\to\installer-or-script.exe"
```
   - GUI: File Properties → check "Unblock" if present.  
4) If files are locked, stop the holding process or reboot into Safe Mode and retry.  
5) Reboot and verify Windows Update operation.

## Permanent fixes (root causes)
- Correct ownership and inheritance locally; avoid broad permission changes.  
- Implement Defender/EDR allowlists and clear exception policies.  
- Create GPO/EDR change request and documentation workflows.  
- Avoid running installers directly from shares or inside ZIPs; copy to local (e.g., C:\Temp) before execution.

## Detailed steps (Windows 10/11)
1. GUI: set proper owner → enable inheritance → assign least privileges needed.  
2. Command examples (run as admin)
```cmd
takeown /F "C:\Path\To\Folder" /R /D Y
icacls "C:\Path\To\Folder" /grant Administrators:F /T
```
Rollback example (restore SYSTEM ownership):
```powershell
$p = "C:\Path\To\Folder"
icacls $p /setowner "NT AUTHORITY\SYSTEM" /T
```
Reset overly broad permissions / restore inheritance:
```cmd
icacls "C:\Path\To\Folder" /inheritance:e
icacls "C:\Path\To\Folder" /reset
```
3. Defender: check state and add allowed application
```powershell
Get-MpPreference | Select EnableControlledFolderAccess, ControlledFolderAccessAllowedApplications
Add-MpPreference -ControlledFolderAccessAllowedApplications "C:\Path\app.exe"
```
4. If a file is locked (how to find):  
- Win + R → resmon → CPU tab → search Associated Handles for the path → stop the process or reboot into Safe Mode.

⚠ Note: Temporarily disabling Defender/EDR or granting broad permissions must be limited to the task duration. After work completion, revert changes (rollback: restore original owner/ACL and re-enable protections).

## Common pitfalls (do not do)
- Change ownership broadly on Windows\System32 or Program Files.  
- Grant Everyone:Full on shared folders.

## Recurrence checklist
- Operate as standard user and elevate only when necessary.  
- Copy installers locally immediately after download before running.  
- Document and peer-review any permission or policy changes.

## Related cases
- Steps for 0x80070005 during Windows Update  
- Steps for 0x80070005 when activating Office/Outlook  
- Steps for 0x80070005 with OneDrive/sync clients

## References
- https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/icacls  
- https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/takeown  
- https://learn.microsoft.com/en-us/powershell/module/defender/get-mppreference  
- https://learn.microsoft.com/en-us/powershell/module/defender/add-mppreference  
- https://learn.microsoft.com/en-us/defender-endpoint/enable-controlled-folders  
- https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/gpresult