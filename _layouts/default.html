<!doctype html>
<html lang="{{ page.lang | default: site.lang | default: 'ja' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{% if page.title %}{{ page.title }} · {% endif %}{{ site.title | default: "Errorpedia" }}</title>

  {%- assign _desc = page.excerpt | default: site.description | strip_html | strip | replace: "
", " " | truncate: 160 -%}
  <meta name="description" content="{{ _desc }}">
  <link rel="canonical" href="{{ page.url | absolute_url }}">
  <link rel="icon" href="{{ '/favicon.ico' | relative_url }}">
  {% seo %}

  <style>
    :root{--maxw:960px;--fg:#111;--muted:#666;--link:#0b72e7;--border:#e5e7eb;--bg:#fff;--chip:#eef2ff;--chipfg:#334155;--kbd:#f3f4f6}
    *{box-sizing:border-box} html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Yu Gothic UI",sans-serif;line-height:1.7}
    a{color:var(--link);text-decoration:none} a:hover{text-decoration:underline}
    code,kbd,pre{font-family:ui-monospace,Menlo,Consolas,monospace}
    pre{overflow:auto;border:1px solid var(--border);border-radius:12px;padding:1rem;background:#0b1020;color:#e6edf3}
    kbd{background:var(--kbd);border:1px solid var(--border);border-bottom-width:2px;border-radius:6px;padding:.1rem .35rem}
    img{max-width:100%;height:auto}
    .container{max-width:var(--maxw);margin:0 auto;padding:1.25rem}
    header.site{padding:.75rem 0;border-bottom:1px solid var(--border)}
    .brand{display:flex;gap:.75rem;align-items:center;justify-content:space-between}
    .brand h1{margin:0;font-size:1.25rem}
    nav.primary{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}
    nav.primary a{padding:.25rem .5rem;border-radius:8px}
    nav.primary a.active{background:#f1f5f9;text-decoration:none}
    .srch input{width:14rem;max-width:50vw;padding:.4rem .6rem;border:1px solid var(--border);border-radius:8px}
    .breadcrumbs{font-size:.9rem;color:var(--muted);margin:.75rem 0}
    .langswitch{margin:.5rem 0 1rem}
    .meta{color:var(--muted);font-size:.9rem;margin:.25rem 0 1rem}
    .tags{display:flex;flex-wrap:wrap;gap:.4rem;margin:.5rem 0 1rem}
    .tag{background:var(--chip);color:var(--chipfg);padding:.15rem .5rem;border-radius:999px;font-size:.8rem}
    footer.site{margin-top:2rem;padding:1.25rem 0;border-top:1px solid var(--border);color:var(--muted);font-size:.9rem}
    @media (max-width:640px){ .srch input{width:10rem} }
  </style>

  {% if site.adsense_client %}
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client={{ site.adsense_client }}" crossorigin="anonymous"></script>
  {% endif %}
</head>
<body>
  <a href="#main" style="position:absolute;left:-9999px;">Skip to content</a>

  <header class="site">
    <div class="container brand">
      <h1><a href="{{ '/' | relative_url }}">Errorpedia</a></h1>
      <nav class="primary" aria-label="Primary">
        <a href="{{ '/ja/' | relative_url }}" {% if page.url == '/ja/' or page.lang == 'ja' %}class="active"{% endif %}>日本語</a>
        <a href="{{ '/en/' | relative_url }}" {% if page.url == '/en/' or page.lang == 'en' %}class="active"{% endif %}>English</a>
        <a href="{{ '/search.html' | relative_url }}" {% if page.url == '/search.html' %}class="active"{% endif %}>Search</a>
      </nav>
      <form action="{{ '/search.html' | relative_url }}" method="get" role="search">
        <input type="search" name="q" placeholder="Search…" aria-label="Search">
      </form>
    </div>
  </header>

  <div class="container">
    {% assign is_article = page.url contains '/ja/' or page.url contains '/en/' %}
    {% if is_article %}
      <nav class="breadcrumbs" aria-label="Breadcrumb">
        <span><a href="{{ '/' | relative_url }}">Home</a></span> ›
        {% if page.url contains '/ja/' %}
          <span><a href="{{ '/ja/' | relative_url }}">日本語</a></span>
        {% else %}
          <span><a href="{{ '/en/' | relative_url }}">English</a></span>
        {% endif %}
        {% if page.title %} › <span>{{ page.title }}</span>{% endif %}
      </nav>

      {% assign alt_url = page.url %}
      {% if page.url contains '/ja/' %}
        {% assign alt_url = page.url | replace:'/ja/','/en/' %}
      {% elsif page.url contains '/en/' %}
        {% assign alt_url = page.url | replace:'/en/','/ja/' %}
      {% endif %}
      <div class="langswitch">
        <a href="{{ alt_url | relative_url }}">Switch:
          {% if page.lang == 'ja' %}English{% elsif page.lang == 'en' %}日本語{% else %}{% if page.url contains '/ja/' %}English{% else %}日本語{% endif %}{% endif %}
        </a>
      </div>

      <div class="meta">
        {% if page.updatedAt %}最終更新: {{ page.updatedAt }}{% elsif page.date %}公開: {{ page.date | date: "%Y-%m-%d" }}{% endif %}
      </div>
      {% if page.tags %}
        <div class="tags" aria-label="tags">
          {% for t in page.tags %}<span class="tag">{{ t }}</span>{% endfor %}
        </div>
      {% endif %}
    {% endif %}

    <main id="main" role="main">{{ content }}</main>

    <footer class="site">
      <div>
        <span>&copy; {{ site.time | date: '%Y' }} Errorpedia</span>
        · <a href="{{ '/' | relative_url }}">Home</a>
        · <a href="{{ '/ja/' | relative_url }}">日本語</a>
        · <a href="{{ '/en/' | relative_url }}">English</a>
        · <a href="{{ '/search.html' | relative_url }}">Search</a>
        {% if site.github and site.github.repository_url %} · <a href="{{ site.github.repository_url }}">GitHub</a>{% endif %}
      </div>
    </footer>
  </div>
</body>
</html>
